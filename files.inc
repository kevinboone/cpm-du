;------------------------------------------------------------------------
;  files.inc
;  Copyright (c)2021 Kevin Boone, GPL v3.0
;------------------------------------------------------------------------

	.Z80

;------------------------------------------------------------------------
; filesize
; Get the number of records in the file whose name is indicated by
;   HL. The name is in readable format ("foo.bar"), not FCB format.
;   The name may contain a drive letter; if absent, the default drive
;   is assumed. The number of records is returned in BC, which is an
;   unsigned value. On success, A = 1, else A = 0 on exit.
; All registers are preserved.
;------------------------------------------------------------------------
; external filesize

;------------------------------------------------------------------------
; enumfiles 
; Enumerates files matching the pattern addressed by HL. The pattern may
;   be a plain filename, or a filename with a drive ("b:foo") or 
;   something with wildcard. On entry BC points to a routine that will be
;   called for every matching file. This routing will be called with HL
;   pointing to the FCB generated by the search. This FCB will have the
;   drive at byte zero -- if the caller specified the drive. If the
;   original filename did not contain a drive letter, then this value
;   will be zero.
;
; The callback function in (BC) MUST NOT MODIFY ANY REGISTERS except
;   AF. The value in A is used to determine the action -- if it is
;   non-zero, enumeration continues; otherwise it stops. The enumfiles
;   function itself preserves registers.
;
; The enumfiles function itself returns with a 1 in A if it is able
;   to enumerate any files. If the callback function terminates the
;   enumation, this is still considered a success. There's no way to
;   tell -- CP/M being what it is -- whether the overall success or
;   failure is the result of there being no files that match the 
;   supplied name, or some other kind of error.  
;
; The callback function must not carry out any disk access of its own,
;   even if it uses its own FCBs. This, again, is a limitation of
;   BDOS. Even finding the size of the file is verboten.
;------------------------------------------------------------------------
external enumfiles

